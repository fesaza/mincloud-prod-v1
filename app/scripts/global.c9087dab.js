"use strict";angular.module("backAnd.directives",[]),angular.module("backAnd.filters",[]),angular.module("backAnd.controllers",[]),angular.module("backAnd.services",[]),angular.module("backAnd",["ngRoute","ngResource","ui.bootstrap","ngMap","timer","backAnd.filters","backAnd.services","backAnd.directives","backAnd.controllers","btford.socket-io","ngCordova","webcam","ngFileUpload","QuickList","dx"]).config(["$routeProvider","$httpProvider","$sceDelegateProvider",function(a,b,c){c.resourceUrlWhitelist(["self",URL_API_UPLOAD_IMAGES+"**"]),b.interceptors.push("interceptorService"),backand.options.url=backandGlobal.url,a.when("/pivot",{templateUrl:"partials/pivot/pivot.html"}).when("/",{templateUrl:"partials/default.html"}).when("/timeline",{templateUrl:"partials/timeline/timeline.html"}).when("/login",{templateUrl:"partials/login/login.html"}).when("/grids",{templateUrl:"partials/grids/grids.html"}).when("/dashboard",{templateUrl:"partials/dashboard/dashboard.html"}).when("/forms",{templateUrl:"partials/forms/forms.html"}).when("/rememberme",{templateUrl:"partials/rememberme/rememberme.html"}).when("/recoveryPassword/:userId",{templateUrl:"partials/recoveryPassword/recoveryPassword.html"}).when("/navigation",{templateUrl:"partials/navigation/navigation.html"}).when("/roles",{templateUrl:"partials/roles/roles.html"}).when("/friends",{templateUrl:"partials/friends/friends.html"}).when("/createrol",{templateUrl:"partials/createrol/createrol.html"}).when("/permisos",{templateUrl:"partials/permisos/permisos.html"}).when("/rolesxusers",{templateUrl:"partials/rolesXuser/rolesXuser.html"}).when("/register/:aplicationName",{templateUrl:"partials/register/register.html"}).when("/login/:aplicationName",{templateUrl:"partials/login/login.html"}).when("/:aplicationName/:action",{templateUrl:"partials/action/action.html"}).when("/tasklist",{templateUrl:"partials/taskList/taskList.html"}).when("/encuesta",{templateUrl:"partials/encuesta/encuesta.html"}).when("/recovery",{templateUrl:"partials/recovery/recovery.html"}).when("/confirmEmail",{templateUrl:"partials/register/confirmEmail.html"}).when("/:appName",{templateUrl:"partials/login/login.html"}).otherwise({redirectTo:"/"})}]),angular.module("backAnd.controllers").controller("initController",["$scope","Global","$compile","menuService","$timeout","$rootScope","$http","$location",function(a,b,c,d,e,f,g,h){a.global=b,a.MostarMenu=!1,a.MostrarMenuMovil=!1,a.ViewType=!1,localStorage.getItem("Authorization")?(a.MostarMenu=!0,a.ViewType=!0,a.colMenu=""):(a.MostarMenu=!1,a.MostrarMenuMovil=!1,a.colMenu="without-col-menu"),a.init=function(){if(localStorage.getItem("Authorization")){"/login"==h.$$path&&h.path("/"),i(),g.defaults.headers.common.Authorization=localStorage.getItem("Authorization"),backand.security.authentication.token=g.defaults.headers.common.Authorization;var a=document.getElementsByClassName("dolar-colombia-widget")[0];sessionStorage.DolarHoy=a.getElementsByTagName("strong")[0].innerText.substring(2,10),a.setAttribute("style","display:none")}else location.hash.includes("_Lappiz")?h.path(location.hash.split("#")[1]):"true"==sessionStorage.CustomLogin?h.path(sessionStorage.workspace):h.path("/login")},a.isGrid=function(){return-1!=h.path().indexOf("grid")};var i=function(){document.addEventListener("deviceready",j,!1)},j=function(){MOCA.addCustomActionListener(l),k()},k=function(){var a=cordova.plugins.permissions,b=function(a){console.error(error,a)},c=function(a){a.hasPermission?n():console.warn("Location Permission denied")},d=function(d){d.hasPermission?n():a.requestPermission(a.ACCESS_FINE_LOCATION,c,b)};a.hasPermission(a.ACCESS_FINE_LOCATION,d,b)},l=function(a){m("B1A3B39E-988E-4D87-B9E9-721D5E991E34")},m=function(a){g.get(backandGlobal.urlAPI+"/"+sessionStorage.workspace+".api/api/Lappiz_Userss('"+a+"')").then(function(b){f.profileUrl.rowId=b.data.d.Id,f.timelineUserId=a,h.search(f.profileUrl),h.path("/forms")})},n=function(){MOCA.setProximityEnabled(!0),MOCA.setGeoTrackingEnabled(!0)}}]);var backand={options:{url:"",version:"1",getUrl:function(a){return this.url+"/"+this.version+a},ajax:function(a,b,c,d,e){},verbs:{get:"GET",put:"PUT",post:"POST",delete:"DELETE"}},security:{banner:{url:"/api/banner",getAdminInfo:function(){var a=null;return backand.options.ajax(backand.options.url+backand.security.banner.url,null,backand.options.verbs.post,function(b){a=b},function(a,b,c){a?a.responseJSON?a.responseJSON.error_description?console.error("ERROR: "+a.responseJSON.error_description):c?console.error("ERROR: "+JSON.stringify(c)):console.error("ERROR: Failed to getAdminInfo"):console.error("ERROR: "+JSON.stringify(a)):c?console.error("ERROR: "+JSON.stringify(c)):console.error("ERROR: Failed to getAdminInfo")}),a}},authentication:{url:"/token",token:null,onlogin:null,addLoginEvent:function(a){null==backand.security.authentication.onlogin&&(window.navigator.userAgent.indexOf("MSIE ")>0||navigator.userAgent.match(/Trident.*rv\:11\./)?(backand.security.authentication.onlogin=document.createEvent("CustomEvent"),backand.security.authentication.onlogin.initCustomEvent("onlogin",!1,!1,{appname:a})):backand.security.authentication.onlogin=new CustomEvent("onlogin",{appname:a}))},login:function(a,b,c,d,e){backand.security.authentication.addLoginEvent(),backand.options.ajax(backand.options.url+backand.security.authentication.url,{grant_type:"password",username:a,password:b,appname:c},backand.options.verbs.post,function(a){backand.security.authentication.token=a.token_type+" "+a.access_token,document.dispatchEvent(backand.security.authentication.onlogin),d&&d(a)},function(a,b,c){e&&a&&e(a,b,c)},!0)}},unlock:function(a,b,c){var d=backand.options.getUrl("/account/unlock");backand.options.ajax(d,JSON.stringify({username:a}),backand.options.verbs.post,b,c)}},api:{app:{url:"/app/config",getConfig:function(a,b){var c=backand.options.getUrl(backand.api.app.url);backand.options.ajax(c,null,backand.options.verbs.get,a,b)}},view:{config:{url:"/view/config/",getItem:function(a,b,c){var d=backand.options.getUrl(backand.api.view.config.url+a);backand.options.ajax(d,null,backand.options.verbs.get,b,c)},getList:function(a,b,c,d,e,f,g,h){var i=backand.options.getUrl(backand.api.view.config.url),j={withSelectOptions:a,pageNumber:b,pageSize:c,filter:JSON.stringify(d),sort:JSON.stringify(e),search:f};backand.options.ajax(i,j,backand.options.verbs.get,g,h)},getFieldByName:function(a,b){if(!a.hashFieldsByName){a.hashFieldsByName={};for(var c=0;c<a.fields.length;c++){var d=a.fields[c];a.hashFieldsByName[d.name]=d}}return a.hashFieldsByName[b]}},data:{url:"/view/data/",getItem:function(a,b,c,d,e){var f=backand.options.getUrl(backand.api.view.data.url+a+"/"+b),g={deep:c};backand.options.ajax(f,g,backand.options.verbs.get,d,e)},getList:function(a,b,c,d,e,f,g,h,i){var j=backand.options.getUrl(backand.api.view.data.url+a),k={withSelectOptions:b,pageNumber:c,pageSize:d,filter:JSON.stringify(e),sort:JSON.stringify(f),search:g};backand.options.ajax(j,k,backand.options.verbs.get,h,i)},createItem:function(a,b,c,d){var e=backand.options.getUrl(backand.api.view.data.url+a);backand.options.ajax(e,b,backand.options.verbs.post,c,d)},updateItem:function(a,b,c,d,e){var f=backand.options.getUrl(backand.api.view.data.url+a+"/"+b);backand.options.ajax(f,c,backand.options.verbs.put,d,e)},deleteItem:function(a,b,c,d){var e=backand.options.getUrl(backand.api.view.data.url+a+"/"+b);backand.options.ajax(e,null,backand.options.verbs.delete,c,d)},autoComplete:function(a,b,c,d,e){var f=backand.options.getUrl(backand.api.view.data.url+"autocomplete/"+a+"/"+b);backand.options.ajax(f,c,backand.options.verbs.get,d,e)}}},chart:{config:{url:"/chart/config/",getItem:function(a,b,c){var d=backand.options.getUrl(backand.api.chart.config.url+a);backand.options.ajax(d,null,backand.options.verbs.get,b,c)},getList:function(a,b,c,d,e,f,g,h){var i=backand.options.getUrl(backand.api.chart.config.url),j={withSelectOptions:a,pageNumber:b,pageSize:c,filter:JSON.stringify(d),sort:JSON.stringify(e),search:f};backand.options.ajax(i,j,backand.options.verbs.get,g,h)}},data:{url:"/chart/data/",getItem:function(a,b,c){var d=backand.options.getUrl(backand.api.chart.data.url+a);backand.options.ajax(d,null,backand.options.verbs.get,b,c)}}},content:{config:{url:"/content/config/",getItem:function(a,b,c){var d=backand.options.getUrl(backand.api.content.config.url+a);backand.options.ajax(d,null,backand.options.verbs.get,b,c)},getList:function(a,b,c,d,e,f,g,h){var i=backand.options.getUrl(backand.api.content.config.url),j={withSelectOptions:a,pageNumber:b,pageSize:c,filter:JSON.stringify(d),sort:JSON.stringify(e),search:f};backand.options.ajax(i,j,backand.options.verbs.get,g,h)}}}},filter:{item:function(a,b,c){this.fieldName=a,this.operator=b,this.value=c},operator:{numeric:{equals:"equals",notEquals:"notEquals",greaterThan:"greaterThan",greaterThanOrEqualsTo:"greaterThanOrEqualsTo",lessThan:"lessThan",lessThanOrEqualsTo:"lessThanOrEqualsTo",empty:"empty",notEmpty:"notEmpty"},date:{equals:"equals",notEquals:"notEquals",greaterThan:"greaterThan",greaterThanOrEqualsTo:"greaterThanOrEqualsTo",lessThan:"lessThan",lessThanOrEqualsTo:"lessThanOrEqualsTo",empty:"empty",notEmpty:"notEmpty"},text:{equals:"equals",notEquals:"notEquals",startsWith:"startsWith",endsWith:"endsWith",contains:"contains",notContains:"notContains",empty:"empty",notEmpty:"notEmpty"},boolean:{equals:"equals"},relation:{in:"in"}}},sort:{item:function(a,b){this.fieldName=a,this.order=b},order:{asc:"asc",desc:"desc"}},defaultFieldValue:function(a,b){this.fieldName=a,this.value=b}};backand.filter.item.prototype.constructor=backand.filter.item,backand.filter.item.prototype.fieldName=function(){return this.fieldName},backand.filter.item.prototype.operator=function(){return this.operator},backand.filter.item.prototype.value=function(){return this.value},backand.sort.item.prototype.constructor=backand.sort.item,backand.sort.item.prototype.fieldName=function(){return this.fieldName},backand.sort.item.prototype.order=function(){return this.order},backand.defaultFieldValue.prototype.constructor=backand.defaultFieldValue,backand.defaultFieldValue.prototype.fieldName=function(){return this.fieldName},backand.defaultFieldValue.prototype.value=function(){return this.value},backand.security.authentication.login("nir",123456789,"manager",function(a){backand.api.view.data.getList("list")},null),backand.options.ajax=function(a,b,c,d,e,f){$.ajax({url:a,async:!1,type:c,beforeSend:function(a){f||a.setRequestHeader("Authorization",backand.security.authentication.token)},data:b,dataType:"json",cache:!1,error:function(a,b,c){c&&e(a,b,c)},success:function(a,b,c){d&&d(a,b,c)}})};var MAP_DEFAULT_POSITION={pos:[6.2527682,-75.5652314],address:""},envs={LOCAL:"LOCAL",DESARROLLO:"DEV",TESTING:"TEST",PRODUCTION:"PROD"},env="PROD",URL_API_UPLOAD_IMAGES,url,urlAPI,api2,runtime,urlNotifications;env==envs.LOCAL&&(URL_API_UPLOAD_IMAGES="http://localhost:49335/api/Upload/UploadImages/",url="http://10.211.55.3/Fintic.AppEngine.API2",urlAPI="https://api.lappiz.io/",api2="https://engine.lappiz.io",runtime="http://localhost/Fintic.AppEngine.Web2",urlNotifications="https://lappiznotifications.azurewebsites.net"),env==envs.DESARROLLO&&(URL_API_UPLOAD_IMAGES="http://developer.lappiz.io/Api/api/Upload/UploadImages/",url="http://developer.lappiz.io/Api",urlAPI="http://developer.api.lappiz.io/",api2="http://developer.engine.lappiz.io",runtime="http://developer.lappiz.io/Admin",urlNotifications="https://lappiznotifications.azurewebsites.net"),env==envs.TESTING&&(URL_API_UPLOAD_IMAGES="http://test.lappiz.io/Api/api/Upload/UploadImages/",url="http://test.lappiz.io/Api",urlAPI="http://test.api.lappiz.io/",api2="http://test.engine.lappiz.io",runtime="http://test.lappiz.io/Admin",urlNotifications="https://lappiznotifications.azurewebsites.net"),env==envs.PRODUCTION&&(URL_API_UPLOAD_IMAGES="https://lappiz.io/Api/api/Upload/UploadImages/",url="https://lappiz.io/Api",urlAPI="https://api.lappiz.io/",api2="https://engine.lappiz.io",runtime="https://lappiz.io/Admin",urlNotifications="https://lappiznotifications.azurewebsites.net");var backandGlobal={url:url,urlAPI:urlAPI,api2:api2,runtime:runtime,defaultApp:null,enableBusy:!0,timeline:!1,urlNotifications:urlNotifications,CurrentLoginApp:""};$(document).ready(function(){angular.element(document).ready(function(){backand.security.authentication.addLoginEvent(),document.dispatchEvent(backand.security.authentication.onlogin)})});var zfill=function(a,b){return(Array(b).join("0")+a).slice(-b)};